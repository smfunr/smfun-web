<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>sm.fun - Auto Trading & Prediction Markets</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #000; 
            color: #00ff00; 
            font-family: 'Courier New', monospace;
            overflow-x: hidden;
        }
        .header {
            background: #111;
            border-bottom: 2px solid #00ff00;
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
            color: #ffff00;
        }
        .nav {
            display: flex;
            gap: 20px;
        }
        .nav-item {
            color: #00ff00;
            text-decoration: none;
            padding: 8px 16px;
            border: 1px solid transparent;
            border-radius: 4px;
        }
        .nav-item:hover {
            background: #333;
            border-color: #00ff00;
        }
        .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 30px;
            max-width: 1400px;
            margin: 0 auto;
        }
        .section {
            background: #111;
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 20px;
        }
        .section-title {
            color: #00ffff;
            font-size: 20px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }
        .stat-card {
            background: #222;
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 15px;
        }
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #ffff00;
            margin: 5px 0;
        }
        .stat-label {
            color: #888;
            font-size: 12px;
        }
        .strategy-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .strategy-item {
            background: #222;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .strategy-info h4 {
            color: #00ffff;
            margin-bottom: 5px;
        }
        .strategy-stats {
            display: flex;
            gap: 15px;
            font-size: 12px;
        }
        .strategy-stat {
            color: #888;
        }
        .strategy-stat .value {
            color: #00ff00;
            font-weight: bold;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #333;
            transition: .4s;
            border-radius: 24px;
        }
        .slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: #888;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .slider {
            background-color: #00ff00;
        }
        input:checked + .slider:before {
            transform: translateX(26px);
            background-color: #000;
        }
        .btn {
            background: #222;
            color: #00ff00;
            border: 1px solid #00ff00;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn:hover {
            background: #333;
        }
        .btn.primary {
            background: linear-gradient(90deg, #00ff00, #00ffff);
            color: #000;
            font-weight: bold;
        }
        .market-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .market-item {
            background: #222;
            border: 1px solid #333;
            border-radius: 6px;
            padding: 15px;
        }
        .market-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        .market-title {
            color: #00ffff;
            font-weight: bold;
        }
        .market-time {
            color: #888;
            font-size: 12px;
        }
        .market-pools {
            display: flex;
            gap: 20px;
            margin-bottom: 15px;
        }
        .pool {
            flex: 1;
            text-align: center;
            padding: 10px;
            border-radius: 4px;
        }
        .pool-yes {
            background: rgba(0, 255, 0, 0.1);
            border: 1px solid #00ff00;
        }
        .pool-no {
            background: rgba(255, 0, 0, 0.1);
            border: 1px solid #ff0000;
        }
        .pool-label {
            font-size: 12px;
            color: #888;
            margin-bottom: 5px;
        }
        .pool-value {
            font-size: 18px;
            font-weight: bold;
        }
        .pool-yes .pool-value {
            color: #00ff00;
        }
        .pool-no .pool-value {
            color: #ff0000;
        }
        .bet-controls {
            display: flex;
            gap: 10px;
        }
        .bet-input {
            flex: 1;
            padding: 8px;
            background: #222;
            border: 1px solid #00ff00;
            color: #00ff00;
            border-radius: 4px;
        }
        .bet-btn {
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
        .bet-yes {
            background: rgba(0, 255, 0, 0.2);
            color: #00ff00;
            border: 1px solid #00ff00;
        }
        .bet-no {
            background: rgba(255, 0, 0, 0.2);
            color: #ff0000;
            border: 1px solid #ff0000;
        }
        .chart-container {
            height: 300px;
            background: #222;
            border: 1px solid #00ff00;
            border-radius: 8px;
            margin-bottom: 20px;
            position: relative;
        }
        .chart-placeholder {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100%;
            color: #888;
            font-size: 14px;
        }
        .trade-log {
            height: 200px;
            overflow-y: auto;
            background: #222;
            border: 1px solid #00ff00;
            border-radius: 8px;
            padding: 10px;
            font-size: 12px;
        }
        .log-entry {
            padding: 5px 0;
            border-bottom: 1px solid #333;
        }
        .log-time {
            color: #888;
        }
        .log-action {
            color: #00ff00;
        }
        .log-profit {
            color: #ffff00;
        }
        .log-loss {
            color: #ff0000;
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        .modal-content {
            background: #111;
            border: 2px solid #00ff00;
            border-radius: 8px;
            padding: 30px;
            max-width: 500px;
            width: 90%;
        }
        .modal-title {
            color: #00ffff;
            font-size: 20px;
            margin-bottom: 20px;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-label {
            display: block;
            color: #888;
            margin-bottom: 5px;
            font-size: 14px;
        }
        .form-input {
            width: 100%;
            padding: 10px;
            background: #222;
            border: 1px solid #00ff00;
            color: #00ff00;
            border-radius: 4px;
        }
        .form-select {
            width: 100%;
            padding: 10px;
            background: #222;
            border: 1px solid #00ff00;
            color: #00ff00;
            border-radius: 4px;
        }
        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        @media (max-width: 1024px) {
            .container {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">sm.fun AUTO TRADING</div>
        <div class="nav">
            <a href="index.html" class="nav-item">üè† Home</a>
            <a href="ico.html" class="nav-item">üöÄ ICO</a>
            <a href="auto-trading.html" class="nav-item" style="background: #333; border-color: #00ff00;">ü§ñ Auto Trading</a>
            <a href="admin/login.html" class="nav-item">‚öôÔ∏è Admin</a>
        </div>
    </div>
    
    <div class="container">
        <!-- Â∑¶‰æßÔºöËá™Âä®‰∫§Êòì -->
        <div class="section">
            <div class="section-title">ü§ñ Auto Trading Strategies</div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Total Strategies</div>
                    <div class="stat-value" id="total-strategies">3</div>
                    <div style="color: #00ff00; font-size: 12px;">Active: <span id="active-strategies">3</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total Profit</div>
                    <div class="stat-value" id="total-profit">+2.45 ETH</div>
                    <div style="color: #00ff00; font-size: 12px;">Today: <span id="today-profit">+0.12 ETH</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Win Rate</div>
                    <div class="stat-value" id="win-rate">68.2%</div>
                    <div style="color: #00ff00; font-size: 12px;">Total Trades: <span id="total-trades">142</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Active Capital</div>
                    <div class="stat-value" id="active-capital">8.42 ETH</div>
                    <div style="color: #00ff00; font-size: 12px;">Max Drawdown: <span id="max-drawdown">-4.2%</span></div>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <button class="btn primary" onclick="showCreateStrategyModal()">+ Create New Strategy</button>
                <button class="btn" onclick="refreshStrategies()">üîÑ Refresh</button>
                <button class="btn" onclick="exportTradingData()">üì• Export Data</button>
            </div>
            
            <div class="strategy-list" id="strategy-list">
                <!-- Á≠ñÁï•ÂàóË°®Â∞ÜÈÄöËøáJSÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
        
        <!-- Âè≥‰æßÔºöÈ¢ÑÊµãÂ∏ÇÂú∫ -->
        <div class="section">
            <div class="section-title">üìà Prediction Markets</div>
            
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Active Markets</div>
                    <div class="stat-value" id="active-markets">3</div>
                    <div style="color: #00ff00; font-size: 12px;">Total: <span id="total-markets">8</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Total Pool</div>
                    <div class="stat-value" id="total-pool">42.8 ETH</div>
                    <div style="color: #00ff00; font-size: 12px;">Avg. Bet: <span id="avg-bet">0.85 ETH</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">My Bets</div>
                    <div class="stat-value" id="my-bets">2</div>
                    <div style="color: #00ff00; font-size: 12px;">Potential: <span id="potential-payout">+3.2 ETH</span></div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Accuracy</div>
                    <div class="stat-value" id="prediction-accuracy">72.5%</div>
                    <div style="color: #00ff00; font-size: 12px;">Total Won: <span id="total-won">+8.4 ETH</span></div>
                </div>
            </div>
            
            <div style="margin-bottom: 20px;">
                <button class="btn primary" onclick="showCreateMarketModal()">+ Create Market</button>
                <button class="btn" onclick="refreshMarkets()">üîÑ Refresh</button>
                <button class="btn" onclick="claimAllPayouts()">üí∞ Claim All</button>
            </div>
            
            <div class="market-list" id="market-list">
                <!-- Â∏ÇÂú∫ÂàóË°®Â∞ÜÈÄöËøáJSÂä®ÊÄÅÁîüÊàê -->
            </div>
        </div>
        
        <!-- Â∫ïÈÉ®ÔºöÂõæË°®ÂíåÊó•Âøó -->
        <div class="section" style="grid-column: 1 / -1;">
            <div class="section-title">üìä Performance Analytics</div>
            
            <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 20px;">
                <div class="chart-container">
                    <div class="chart-placeholder">
                        üìà Real-time Trading Performance Chart<br>
                        <span style="font-size: 12px; color: #888;">(Chart integration coming soon)</span>
                    </div>
                </div>
                
                <div>
                    <div class="section-title" style="font-size: 16px;">üìù Recent Trades</div>
                    <div class="trade-log" id="trade-log">
                        <!-- ‰∫§ÊòìÊó•ÂøóÂ∞ÜÈÄöËøáJSÂä®ÊÄÅÁîüÊàê -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ÂàõÂª∫Á≠ñÁï•Ê®°ÊÄÅÊ°Ü -->
    <div class="modal" id="create-strategy-modal">
        <div class="modal-content">
            <div class="modal-title">Create Trading Strategy</div>
            <div class="form-group">
                <label class="form-label">Strategy Name</label>
                <input type="text" class="form-input" id="strategy-name" placeholder="e.g., Trend Following BTC">
            </div>
            <div class="form-group">
                <label class="form-label">Strategy Type</label>
                <select class="form-select" id="strategy-type">
                    <option value="trend_following">Trend Following</option>
                    <option value="mean_reversion">Mean Reversion</option>
                    <option value="grid_trading">Grid Trading</option>
                    <option value="prediction_based">Prediction Based</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Trading Pair</label>
                <select class="form-select" id="trading-pair">
                    <option value="BTC/USDT">BTC/USDT</option>
                    <option value="ETH/USDT">ETH/USDT</option>
                    <option value="SOL/USDT">SOL/USDT</option>
                    <option value="BNB/USDT">BNB/USDT</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Initial Capital (ETH)</label>
                <input type="number" class="form-input" id="initial-capital" placeholder="0.1" step="0.01                </select>
            </div>
            <div class="form-group">
                <label class="form-label">Initial Capital (ETH)</label>
                <input type="number" class="form-input" id="initial-capital" placeholder="0.1" step="0.01">
            </div>
            <div class="form-group">
                <label class="form-label">Position Size (%)</label>
                <input type="number" class="form-input" id="position-size" placeholder="10" step="1" min="1" max="50">
            </div>
            <div class="form-group">
                <label class="form-label">Stop Loss (%)</label>
                <input type="number" class="form-input" id="stop-loss" placeholder="2" step="0.5" min="0.5" max="10">
            </div>
            <div class="form-group">
                <label class="form-label">Take Profit (%)</label>
                <input type="number" class="form-input" id="take-profit" placeholder="5" step="0.5" min="1" max="20">
            </div>
            <div class="modal-actions">
                <button class="btn" onclick="hideCreateStrategyModal()">Cancel</button>
                <button class="btn primary" onclick="createStrategy()">Create Strategy</button>
            </div>
        </div>
    </div>
    
    <!-- ÂàõÂª∫Â∏ÇÂú∫Ê®°ÊÄÅÊ°Ü -->
    <div class="modal" id="create-market-modal">
        <div class="modal-content">
            <div class="modal-title">Create Prediction Market</div>
            <div class="form-group">
                <label class="form-label">Market Title</label>
                <input type="text" class="form-input" id="market-title" placeholder="e.g., BTC will reach $70,000 in 24h">
            </div>
            <div class="form-group">
                <label class="form-label">Description</label>
                <textarea class="form-input" id="market-description" rows="3" placeholder="Detailed description of the prediction"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">Duration (Hours)</label>
                <input type="number" class="form-input" id="market-duration" placeholder="24" step="1" min="1" max="720">
            </div>
            <div class="form-group">
                <label class="form-label">Initial Bet (ETH)</label>
                <input type="number" class="form-input" id="initial-bet" placeholder="0.1" step="0.01">
            </div>
            <div class="modal-actions">
                <button class="btn" onclick="hideCreateMarketModal()">Cancel</button>
                <button class="btn primary" onclick="createPredictionMarket()">Create Market</button>
            </div>
        </div>
    </div>
    
    <script>
        // Ê®°ÊãüÊï∞ÊçÆ
        const strategies = [
            {
                id: 1,
                name: 'BTC Trend Follower',
                type: 'trend_following',
                symbol: 'BTC/USDT',
                active: true,
                capital: 2.5,
                profit: 0.42,
                trades: 28,
                winRate: 71.4,
                lastTrade: '2 min ago'
            },
            {
                id: 2,
                name: 'ETH Mean Reversion',
                type: 'mean_reversion',
                symbol: 'ETH/USDT',
                active: true,
                capital: 1.8,
                profit: 0.31,
                trades: 35,
                winRate: 65.7,
                lastTrade: '5 min ago'
            },
            {
                id: 3,
                name: 'SOL Grid Trader',
                type: 'grid_trading',
                symbol: 'SOL/USDT',
                active: true,
                capital: 1.2,
                profit: 0.18,
                trades: 42,
                winRate: 61.9,
                lastTrade: '8 min ago'
            }
        ];
        
        const predictionMarkets = [
            {
                id: 1,
                title: 'BTC will reach $70,000 in 24h',
                endTime: '2026-02-21 21:00',
                totalPool: 18.5,
                yesPool: 12.3,
                noPool: 6.2,
                active: true,
                myBet: { amount: 0.5, prediction: true, claimed: false }
            },
            {
                id: 2,
                title: 'ETH weekly close above $2,000',
                endTime: '2026-02-27 00:00',
                totalPool: 15.2,
                yesPool: 8.7,
                noPool: 6.5,
                active: true,
                myBet: { amount: 0.3, prediction: false, claimed: false }
            },
            {
                id: 3,
                title: 'SOL daily gain > 5%',
                endTime: '2026-02-21 00:00',
                totalPool: 9.1,
                yesPool: 5.8,
                noPool: 3.3,
                active: true,
                myBet: null
            }
        ];
        
        const tradeLogs = [
            { time: '21:03:42', action: 'BUY BTC/USDT', amount: '0.02 BTC', price: '$68,542', profit: '+$124' },
            { time: '21:01:15', action: 'SELL ETH/USDT', amount: '0.5 ETH', price: '$1,985', profit: '+$42' },
            { time: '20:58:33', action: 'BUY SOL/USDT', amount: '5 SOL', price: '$142', profit: '+$18' },
            { time: '20:55:47', action: 'SELL BTC/USDT', amount: '0.01 BTC', price: '$68,420', profit: '-$32' },
            { time: '20:52:11', action: 'BUY ETH/USDT', amount: '0.3 ETH', price: '$1,972', profit: '+$39' }
        ];
        
        // ÂàùÂßãÂåñÈ°µÈù¢
        document.addEventListener('DOMContentLoaded', function() {
            renderStrategies();
            renderPredictionMarkets();
            renderTradeLogs();
            updateStats();
        });
        
        // Ê∏≤ÊüìÁ≠ñÁï•ÂàóË°®
        function renderStrategies() {
            const container = document.getElementById('strategy-list');
            container.innerHTML = '';
            
            strategies.forEach(strategy => {
                const strategyEl = document.createElement('div');
                strategyEl.className = 'strategy-item';
                strategyEl.innerHTML = `
                    <div class="strategy-info">
                        <h4>${strategy.name}</h4>
                        <div class="strategy-stats">
                            <div class="strategy-stat">
                                <span class="label">Type:</span>
                                <span class="value">${strategy.type.replace('_', ' ')}</span>
                            </div>
                            <div class="strategy-stat">
                                <span class="label">Symbol:</span>
                                <span class="value">${strategy.symbol}</span>
                            </div>
                            <div class="strategy-stat">
                                <span class="label">Capital:</span>
                                <span class="value">${strategy.capital} ETH</span>
                            </div>
                            <div class="strategy-stat">
                                <span class="label">Profit:</span>
                                <span class="value" style="color: ${strategy.profit >= 0 ? '#00ff00' : '#ff0000'}">
                                    ${strategy.profit >= 0 ? '+' : ''}${strategy.profit} ETH
                                </span>
                            </div>
                            <div class="strategy-stat">
                                <span class="label">Win Rate:</span>
                                <span class="value">${strategy.winRate}%</span>
                            </div>
                            <div class="strategy-stat">
                                <span class="label">Last Trade:</span>
                                <span class="value">${strategy.lastTrade}</span>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label class="toggle-switch">
                            <input type="checkbox" ${strategy.active ? 'checked' : ''} 
                                   onchange="toggleStrategy(${strategy.id}, this.checked)">
                            <span class="slider"></span>
                        </label>
                        <button class="btn" style="margin-left: 10px;" onclick="viewStrategyDetails(${strategy.id})">
                            Details
                        </button>
                    </div>
                `;
                container.appendChild(strategyEl);
            });
        }
        
        // Ê∏≤ÊüìÈ¢ÑÊµãÂ∏ÇÂú∫
        function renderPredictionMarkets() {
            const container = document.getElementById('market-list');
            container.innerHTML = '';
            
            predictionMarkets.forEach(market => {
                const marketEl = document.createElement('div');
                marketEl.className = 'market-item';
                
                const timeRemaining = calculateTimeRemaining(market.endTime);
                const yesOdds = market.totalPool > 0 ? (market.totalPool / market.yesPool).toFixed(2) : '2.00';
                const noOdds = market.totalPool > 0 ? (market.totalPool / market.noPool).toFixed(2) : '2.00';
                
                marketEl.innerHTML = `
                    <div class="market-header">
                        <div class="market-title">${market.title}</div>
                        <div class="market-time">Ends: ${market.endTime} (${timeRemaining})</div>
                    </div>
                    <div class="market-pools">
                        <div class="pool pool-yes">
                            <div class="pool-label">YES</div>
                            <div class="pool-value">${market.yesPool} ETH</div>
                            <div style="font-size: 11px; color: #888;">${yesOdds}x</div>
                        </div>
                        <div class="pool pool-no">
                            <div class="pool-label">NO</div>
                            <div class="pool-value">${market.noPool} ETH</div>
                            <div style="font-size: 11px; color: #888;">${noOdds}x</div>
                        </div>
                    </div>
                    ${market.active ? `
                    <div class="bet-controls">
                        <input type="number" class="bet-input" id="bet-amount-${market.id}" placeholder="Bet amount (ETH)" step="0.01" min="0.01">
                        <button class="bet-btn bet-yes" onclick="placeBet(${market.id}, true)">BET YES</button>
                        <button class="bet-btn bet-no" onclick="placeBet(${market.id}, false)">BET NO</button>
                    </div>
                    ` : `
                    <div style="text-align: center; padding: 10px; background: #333; border-radius: 4px;">
                        <span style="color: #888;">Market closed</span>
                        ${market.myBet && !market.myBet.claimed ? 
                          `<button class="btn" onclick="claimPayout(${market.id})" style="margin-left: 10px;">Claim Payout</button>` : ''}
                    </div>
                    `}
                    ${market.myBet ? `
                    <div style="margin-top: 10px; font-size: 12px; color: #888;">
                        Your bet: ${market.myBet.amount} ETH on ${market.myBet.prediction ? 'YES' : 'NO'}
                        ${market.myBet.claimed ? '(Claimed)' : ''}
                    </div>
                    ` : ''}
                `;
                container.appendChild(marketEl);
            });
        }
        
        // Ê∏≤Êüì‰∫§ÊòìÊó•Âøó
        function renderTradeLogs() {
            const container = document.getElementById('trade-log');
            container.innerHTML = '';
            
            tradeLogs.forEach(log => {
                const logEl = document.createElement('div');
                logEl.className = 'log-entry';
                logEl.innerHTML = `
                    <span class="log-time">${log.time}</span>
                    <span class="log-action">${log.action}</span>
                    <span>${log.amount} @ ${log.price}</span>
                    <span class="${log.profit.startsWith('+') ? 'log-profit' : 'log-loss'}">${log.profit}</span>
                `;
                container.appendChild(logEl);
            });
        }
        
        // Êõ¥Êñ∞ÁªüËÆ°Êï∞ÊçÆ
        function updateStats() {
            // Á≠ñÁï•ÁªüËÆ°
            const activeStrategies = strategies.filter(s => s.active).length;
            const totalProfit = strategies.reduce((sum, s) => sum + s.profit, 0);
            const totalTrades = strategies.reduce((sum, s) => sum + s.trades, 0);
            const avgWinRate = strategies.reduce((sum, s) => sum + s.winRate, 0) / strategies.length;
            const activeCapital = strategies.filter(s => s.active).reduce((sum, s) => sum + s.capital, 0);
            
            document.getElementById('total-strategies').textContent = strategies.length;
            document.getElementById('active-strategies').textContent = activeStrategies;
            document.getElementById('total-profit').textContent = `${totalProfit >= 0 ? '+' : ''}${totalProfit.toFixed(2)} ETH`;
            document.getElementById('today-profit').textContent = `+${(totalProfit * 0.05).toFixed(2)} ETH`;
            document.getElementById('win-rate').textContent = `${avgWinRate.toFixed(1)}%`;
            document.getElementById('total-trades').textContent = totalTrades;
            document.getElementById('active-capital').textContent = `${activeCapital.toFixed(2)} ETH`;
            document.getElementById('max-drawdown').textContent = '-4.2%';
            
            // È¢ÑÊµãÂ∏ÇÂú∫ÁªüËÆ°
            const activeMarkets = predictionMarkets.filter(m => m.active).length;
            const totalPool = predictionMarkets.reduce((sum, m) => sum + m.totalPool, 0);
            const myBets = predictionMarkets.filter(m => m.myBet).length;
            const potentialPayout = predictionMarkets
                .filter(m => m.myBet && !m.myBet.claimed)
                .reduce((sum, m) => {
                    const odds = m.myBet.prediction ? 
                        (m.totalPool / m.yesPool) : (m.totalPool / m.noPool);
                    return sum + (m.myBet.amount * odds);
                }, 0);
            
            document.getElementById('active-markets').textContent = activeMarkets;
            document.getElementById('total-markets').textContent = predictionMarkets.length;
            document.getElementById('total-pool').textContent = `${totalPool.toFixed(1)} ETH`;
            document.getElementById('avg-bet').textContent = `${(totalPool / (predictionMarkets.length * 2)).toFixed(2)} ETH`;
            document.getElementById('my-bets').textContent = myBets;
            document.getElementById('potential-payout').textContent = `+${potentialPayout.toFixed(1)} ETH`;
            document.getElementById('prediction-accuracy').textContent = '72.5%';
            document.getElementById('total-won').textContent = '+8.4 ETH';
        }
        
        // Â∑•ÂÖ∑ÂáΩÊï∞
        function calculateTimeRemaining(endTime) {
            const end = new Date(endTime);
            const now = new Date();
            const diff = end - now;
            
            if (diff <= 0) return 'Ended';
            
            const hours = Math.floor(diff / (1000 * 60 * 60));
            const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
            
            return `${hours}h ${minutes}m`;
        }
        
        // Á≠ñÁï•Êìç‰Ωú
        function toggleStrategy(strategyId, active) {
            const strategy = strategies.find(s => s.id === strategyId);
            if (strategy) {
                strategy.active = active;
                updateStats();
                alert(`Strategy "${strategy.name}" ${active ? 'activated' : 'deactivated'}`);
            }
        }
        
        function viewStrategyDetails(strategyId) {
            const strategy = strategies.find(s => s.id === strategyId);
            if (strategy) {
                alert(`Strategy Details:\n\n` +
                      `Name: ${strategy.name}\n` +
                      `Type: ${strategy.type}\n` +
                      `Symbol: ${strategy.symbol}\n` +
                      `Capital: ${strategy.capital} ETH\n` +
                      `Profit: ${strategy.profit} ETH\n` +
                      `Trades: ${strategy.trades}\n` +
                      `Win Rate: ${strategy.winRate}%\n` +
                      `Status: ${strategy.active ? 'Active' : 'Inactive'}`);
            }
        }
        
        // È¢ÑÊµãÂ∏ÇÂú∫Êìç‰Ωú
        function placeBet(marketId, prediction) {
            const market = predictionMarkets.find(m => m.id === marketId);
            if (!market || !market.active) {
                alert('Market is not active');
                return;
            }
            
            const amountInput = document.getElementById(`bet-amount-${marketId}`);
            const amount = parseFloat(amountInput.value);
            
            if (!amount || amount <= 0) {
                alert('Please enter a valid bet amount');
                return;
            }
            
            if (market.myBet) {
                alert('You have already placed a bet on this market');
                return;
            }
            
            // Ê®°Êãü‰∏ãÊ≥®
            market.myBet = {
                amount: amount,
                prediction: prediction,
                claimed: false
            };
            
            // Êõ¥Êñ∞ËµÑÈáëÊ±†
            if (prediction) {
                market.yesPool += amount;
            } else {
                market.noPool += amount;
            }
            market.totalPool += amount;
            
            renderPredictionMarkets();
            updateStats();
            
            alert(`Bet placed: ${amount} ETH on ${prediction ? 'YES' : 'NO'}`);
            amountInput.value = '';
        }
        
        function claimPayout(marketId) {
            const market = predictionMarkets.find(m => m.id === marketId);
            if (!market || !market.myBet || market.myBet.claimed) {
                alert('        function claimPayout(marketId) {
            const market = predictionMarkets.find(m => m.id === marketId);
            if (!market || !market.myBet || market.myBet.claimed) {
                alert('No payout to claim');
                return;
            }
            
            // Ê®°ÊãüÈ¢ÜÂèñÂ•ñÂä±
            market.myBet.claimed = true;
            
            renderPredictionMarkets();
            updateStats();
            
            alert('Payout claimed successfully!');
        }
        
        // Ê®°ÊÄÅÊ°ÜÊìç‰Ωú
        function showCreateStrategyModal() {
            document.getElementById('create-strategy-modal').style.display = 'flex';
        }
        
        function hideCreateStrategyModal() {
            document.getElementById('create-strategy-modal').style.display = 'none';
        }
        
        function showCreateMarketModal() {
            document.getElementById('create-market-modal').style.display = 'flex';
        }
        
        function hideCreateMarketModal() {
            document.getElementById('create-market-modal').style.display = 'none';
        }
        
        // ÂàõÂª∫Êñ∞Á≠ñÁï•
        function createStrategy() {
            const name = document.getElementById('strategy-name').value;
            const type = document.getElementById('strategy-type').value;
            const pair = document.getElementById('trading-pair').value;
            const capital = parseFloat(document.getElementById('initial-capital').value);
            const positionSize = parseFloat(document.getElementById('position-size').value);
            const stopLoss = parseFloat(document.getElementById('stop-loss').value);
            const takeProfit = parseFloat(document.getElementById('take-profit').value);
            
            if (!name || !capital || !positionSize) {
                alert('Please fill in all required fields');
                return;
            }
            
            // Ê∑ªÂä†Êñ∞Á≠ñÁï•
            const newStrategy = {
                id: strategies.length + 1,
                name: name,
                type: type,
                symbol: pair,
                active: true,
                capital: capital,
                profit: 0,
                trades: 0,
                winRate: 0,
                lastTrade: 'Never'
            };
            
            strategies.push(newStrategy);
            
            renderStrategies();
            updateStats();
            hideCreateStrategyModal();
            
            // ÈáçÁΩÆË°®Âçï
            document.getElementById('strategy-name').value = '';
            document.getElementById('initial-capital').value = '';
            document.getElementById('position-size').value = '';
            document.getElementById('stop-loss').value = '';
            document.getElementById('take-profit').value = '';
            
            alert(`Strategy "${name}" created successfully!`);
        }
        
        // ÂàõÂª∫Êñ∞È¢ÑÊµãÂ∏ÇÂú∫
        function createPredictionMarket() {
            const title = document.getElementById('market-title').value;
            const description = document.getElementById('market-description').value;
            const duration = parseInt(document.getElementById('market-duration').value);
            const initialBet = parseFloat(document.getElementById('initial-bet').value);
            
            if (!title || !duration) {
                alert('Please fill in all required fields');
                return;
            }
            
            // ËÆ°ÁÆóÁªìÊùüÊó∂Èó¥
            const now = new Date();
            const endTime = new Date(now.getTime() + duration * 60 * 60 * 1000);
            const formattedEndTime = endTime.toISOString().replace('T', ' ').substring(0, 16);
            
            // Ê∑ªÂä†Êñ∞Â∏ÇÂú∫
            const newMarket = {
                id: predictionMarkets.length + 1,
                title: title,
                endTime: formattedEndTime,
                totalPool: initialBet || 0,
                yesPool: initialBet || 0,
                noPool: 0,
                active: true,
                myBet: initialBet ? { amount: initialBet, prediction: true, claimed: false } : null
            };
            
            predictionMarkets.push(newMarket);
            
            renderPredictionMarkets();
            updateStats();
            hideCreateMarketModal();
            
            // ÈáçÁΩÆË°®Âçï
            document.getElementById('market-title').value = '';
            document.getElementById('market-description').value = '';
            document.getElementById('market-duration').value = '';
            document.getElementById('initial-bet').value = '';
            
            alert(`Prediction market "${title}" created successfully!`);
        }
        
        // ÂÖ∂‰ªñÂäüËÉΩ
        function refreshStrategies() {
            // Ê®°Êãü‰ªéÊúçÂä°Âô®Âà∑Êñ∞Êï∞ÊçÆ
            alert('Refreshing strategies...');
            renderStrategies();
            updateStats();
        }
        
        function refreshMarkets() {
            // Ê®°Êãü‰ªéÊúçÂä°Âô®Âà∑Êñ∞Êï∞ÊçÆ
            alert('Refreshing markets...');
            renderPredictionMarkets();
            updateStats();
        }
        
        function exportTradingData() {
            const data = {
                strategies: strategies,
                markets: predictionMarkets,
                logs: tradeLogs,
                timestamp: new Date().toISOString()
            };
            
            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `smfun-trading-data-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('Trading data exported successfully!');
        }
        
        function claimAllPayouts() {
            const claimableMarkets = predictionMarkets.filter(m => 
                m.myBet && !m.myBet.claimed && !m.active
            );
            
            if (claimableMarkets.length === 0) {
                alert('No payouts to claim');
                return;
            }
            
            claimableMarkets.forEach(market => {
                market.myBet.claimed = true;
            });
            
            renderPredictionMarkets();
            updateStats();
            
            alert(`Claimed ${claimableMarkets.length} payouts successfully!`);
        }
        
        // Ê∑ªÂä†Êñ∞‰∫§ÊòìÊó•Âøó
        function addTradeLog(action, amount, price, profit) {
            const now = new Date();
            const time = now.toTimeString().split(' ')[0];
            
            tradeLogs.unshift({
                time: time,
                action: action,
                amount: amount,
                price: price,
                profit: profit
            });
            
            // ‰øùÊåÅÊúÄÂ§ö10Êù°Êó•Âøó
            if (tradeLogs.length > 10) {
                tradeLogs.pop();
            }
            
            renderTradeLogs();
        }
        
        // Ê®°ÊãüËá™Âä®‰∫§ÊòìÔºàÊØè30ÁßíÊ∑ªÂä†‰∏ÄÊù°Êñ∞Êó•ÂøóÔºâ
        setInterval(() => {
            if (Math.random() > 0.7) { // 30% chance of new trade
                const actions = ['BUY BTC/USDT', 'SELL ETH/USDT', 'BUY SOL/USDT', 'SELL BTC/USDT'];
                const action = actions[Math.floor(Math.random() * actions.length)];
                const amount = `${(Math.random() * 0.05 + 0.01).toFixed(3)} ${action.split(' ')[1].split('/')[0]}`;
                const price = `$${(Math.random() * 1000 + 68000).toFixed(0)}`;
                const profit = Math.random() > 0.6 ? 
                    `+$${(Math.random() * 200 + 20).toFixed(0)}` : 
                    `-$${(Math.random() * 100 + 10).toFixed(0)}`;
                
                addTradeLog(action, amount, price, profit);
            }
        }, 30000);
    </script>
</body>
</html>
